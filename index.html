<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KOSH Local Weather | Presented by MioConnect</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Outfit', sans-serif;
            overflow-x: hidden;
            background-color: #0B0F19;
            color: #E2E8F0;
        }

        /* Dark Theme Backgrounds */
        .bg-clear-night { background: linear-gradient(135deg, #0B0F19 0%, #1E293B 50%, #0F172A 100%); }
        .bg-cloudy-night { background: linear-gradient(135deg, #1E293B 0%, #334155 50%, #1E293B 100%); }
        .bg-storm { background: linear-gradient(135deg, #0F172A 0%, #312E81 50%, #1E1B4B 100%); }
        .bg-clear-day { background: linear-gradient(135deg, #0EA5E9 0%, #0284C7 50%, #0369A1 100%); }

        /* Glassmorphism - Darker */
        .glass-panel {
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(148, 163, 184, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
        }

        .glass-card {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(148, 163, 184, 0.08);
            transition: all 0.3s ease;
        }
        .glass-card:hover {
            background: rgba(51, 65, 85, 0.6);
            transform: translateY(-5px);
            border-color: rgba(148, 163, 184, 0.2);
        }

        .glass-card.active {
            background: rgba(6, 182, 212, 0.2);
            border-color: rgba(6, 182, 212, 0.5);
            box-shadow: 0 0 20px rgba(6, 182, 212, 0.3);
        }

        /* Town Card Specific */
        .town-card {
            background: rgba(30, 41, 59, 0.4);
            border: 1px solid rgba(148, 163, 184, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            min-width: 280px;
        }
        .town-card:hover {
            background: rgba(51, 65, 85, 0.5);
            transform: translateY(-3px);
            border-color: rgba(6, 182, 212, 0.3);
        }
        .town-card.active {
            background: rgba(6, 182, 212, 0.15);
            border-color: #06B6D4;
            box-shadow: 0 4px 20px rgba(6, 182, 212, 0.2);
        }

        /* Suburb Tag */
        .suburb-tag {
            background: rgba(6, 182, 212, 0.2);
            border: 1px solid rgba(6, 182, 212, 0.4);
            color: #22D3EE;
            font-weight: 600;
        }

        /* Logo Animation - ONLY THIS ANIMATES */
        .sun-logo {
            display: inline-block;
            animation: spin 20s linear infinite;
            color: #FBBF24;
            filter: drop-shadow(0 0 12px rgba(251, 191, 36, 0.8));
        }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* Background decorative elements - subtle pulse only */
        .bg-glow {
            animation: subtle-pulse 8s ease-in-out infinite;
        }
        @keyframes subtle-pulse {
            0%, 100% { opacity: 0.1; transform: scale(1); }
            50% { opacity: 0.15; transform: scale(1.05); }
        }

        /* Custom Scrollbar - Dark */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: rgba(15, 23, 42, 0.5); }
        ::-webkit-scrollbar-thumb { background: rgba(71, 85, 105, 0.8); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(100, 116, 139, 1); }

        /* Chart Bars */
        .temp-bar {
            transition: height 1s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Text Gradients */
        .text-gradient {
            background: linear-gradient(135deg, #F8FAFC 0%, #94A3B8 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Scroll snap for towns */
        .snap-x-mandatory {
            scroll-snap-type: x mandatory;
        }
        .snap-center {
            scroll-snap-align: center;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col relative transition-all duration-1000 ease-in-out bg-clear-night" id="app-body">

    <!-- Background Elements - Static with subtle pulse -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none z-0">
        <div class="absolute top-[-10%] left-[-10%] w-96 h-96 bg-blue-500/10 rounded-full blur-3xl bg-glow"></div>
        <div class="absolute bottom-[-10%] right-[-10%] w-[500px] h-[500px] bg-indigo-500/10 rounded-full blur-3xl bg-glow" style="animation-delay: 2s;"></div>
        <div class="absolute top-[40%] left-[60%] w-64 h-64 bg-cyan-500/5 rounded-full blur-3xl bg-glow" style="animation-delay: 4s;"></div>
    </div>

    <!-- Header -->
    <header class="relative z-10 w-full p-6 flex justify-between items-center glass-panel border-b-0 rounded-b-3xl mx-auto max-w-7xl mt-0 md:mt-4 md:rounded-2xl">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-gradient-to-br from-cyan-400 to-blue-600 rounded-full flex items-center justify-center font-bold text-xl shadow-lg text-white">K</div>
            <div>
                <h1 class="text-2xl font-bold tracking-tight text-white">KOSH <span class="font-light text-slate-400">Local Weather</span></h1>
                <p class="text-xs text-slate-500 uppercase tracking-widest">North West Region</p>
            </div>
        </div>
        
        <!-- MioConnect Logo - ONLY ANIMATED ELEMENT -->
        <div class="flex items-center gap-2 bg-slate-900/50 px-4 py-2 rounded-full backdrop-blur-md border border-slate-700/50">
            <span class="text-sm font-semibold tracking-wide text-slate-300">Presented by</span>
            <div class="text-xl font-bold flex items-center text-white">
                Mi<span class="sun-logo text-2xl mx-[1px]">
                    <!-- Sun Icon SVG - ONLY THIS SPINS -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="currentColor">
                        <circle cx="12" cy="12" r="5" fill="#FBBF24"/>
                        <g stroke="#FBBF24" stroke-width="2" stroke-linecap="round">
                            <line x1="12" y1="1" x2="12" y2="3"/>
                            <line x1="12" y1="21" x2="12" y2="23"/>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                            <line x1="1" y1="12" x2="3" y2="12"/>
                            <line x1="21" y1="12" x2="23" y2="12"/>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                        </g>
                    </svg>
                </span>Connect
            </div>
        </div>
    </header>

    <!-- Towns Navigation Section -->
    <section class="relative z-10 w-full max-w-7xl mx-auto px-4 md:px-8 mt-6">
        <div class="glass-panel rounded-3xl p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-bold text-white flex items-center gap-2">
                    <!-- Static location icon -->
                    <svg class="w-5 h-5 text-cyan-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                    </svg>
                    Select Location
                </h3>
                <span class="text-sm text-cyan-400 font-medium" id="current-location-display">Klerksdorp (Jouberton)</span>
            </div>
            
            <!-- Towns Scroll Container -->
            <div class="flex overflow-x-auto gap-4 pb-4 snap-x-mandatory" id="towns-container">
                <!-- Towns injected via JS -->
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="relative z-10 flex-grow p-4 md:p-8 max-w-7xl mx-auto w-full grid grid-cols-1 lg:grid-cols-3 gap-6">
        
        <!-- Left Column: Current Weather -->
        <section class="lg:col-span-1 flex flex-col gap-6">
            <!-- Main Card -->
            <div class="glass-panel rounded-3xl p-8 flex flex-col items-center text-center relative overflow-hidden group">
                <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-cyan-400/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                
                <div class="mb-2 px-3 py-1 rounded-full bg-slate-800/80 text-xs font-medium uppercase tracking-wider text-cyan-400 border border-slate-700" id="current-date">Loading...</div>
                
                <div class="my-6 relative">
                    <!-- Static Weather Icon -->
                    <div id="weather-icon-container" class="w-40 h-40 drop-shadow-2xl">
                        <!-- SVG Injected via JS - NO ANIMATION -->
                    </div>
                </div>

                <div class="relative z-10">
                    <h2 class="text-8xl font-bold tracking-tighter text-gradient" id="current-temp">--°</h2>
                    <p class="text-2xl font-medium mt-2 capitalize text-slate-300" id="weather-desc">Loading Data...</p>
                    <p class="text-sm text-cyan-400 mt-1 font-medium" id="location-name">Klerksdorp (Jouberton)</p>
                </div>

                <div class="grid grid-cols-2 gap-4 w-full mt-8 pt-8 border-t border-slate-700/50">
                    <div class="text-center">
                        <p class="text-slate-500 text-xs uppercase mb-1">Wind</p>
                        <p class="text-xl font-semibold text-white"><span id="wind-speed">--</span> <span class="text-sm font-normal text-slate-400">km/h</span></p>
                    </div>
                    <div class="text-center">
                        <p class="text-slate-500 text-xs uppercase mb-1">Humidity</p>
                        <p class="text-xl font-semibold text-white"><span id="humidity">--</span> <span class="text-sm font-normal text-slate-400">%</span></p>
                    </div>
                </div>
            </div>

            <!-- Sun/Moon Cycle -->
            <div class="glass-panel rounded-3xl p-6">
                <h3 class="text-sm font-semibold uppercase tracking-wider text-slate-400 mb-4">Daylight Cycle</h3>
                <div class="flex justify-between items-end h-24 gap-2" id="sun-chart">
                    <!-- Bars generated by JS -->
                </div>
                <div class="flex justify-between text-xs mt-2 text-slate-500">
                    <span>Sunrise: <span id="sunrise-time" class="text-slate-300">06:12</span></span>
                    <span>Sunset: <span id="sunset-time" class="text-slate-300">18:45</span></span>
                </div>
            </div>
        </section>

        <!-- Right Column: Forecast & Details -->
        <section class="lg:col-span-2 flex flex-col gap-6">
            
            <!-- Hourly Forecast -->
            <div class="glass-panel rounded-3xl p-6 overflow-hidden">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-lg font-bold text-white">Hourly Forecast</h3>
                    <div class="flex gap-2">
                        <button class="p-2 rounded-full hover:bg-slate-700/50 transition text-slate-300" onclick="scrollHourly('left')">❮</button>
                        <button class="p-2 rounded-full hover:bg-slate-700/50 transition text-slate-300" onclick="scrollHourly('right')">❯</button>
                    </div>
                </div>
                
                <div class="flex overflow-x-auto gap-4 pb-4 snap-x" id="hourly-container">
                    <!-- Hourly items injected via JS -->
                </div>
            </div>

            <!-- 7 Day Forecast -->
            <div class="glass-panel rounded-3xl p-6 flex-grow">
                <h3 class="text-lg font-bold text-white mb-6">7-Day Outlook</h3>
                <div class="flex flex-col gap-3" id="daily-forecast">
                    <!-- Daily rows injected via JS -->
                </div>
            </div>

            <!-- Extra Details Grid -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="glass-card rounded-2xl p-4 flex flex-col justify-between h-32">
                    <div class="text-slate-500 text-xs uppercase">UV Index</div>
                    <div class="text-3xl font-bold text-white" id="uv-index">4</div>
                    <div class="text-xs text-emerald-400">Moderate</div>
                </div>
                <div class="glass-card rounded-2xl p-4 flex flex-col justify-between h-32">
                    <div class="text-slate-500 text-xs uppercase">Visibility</div>
                    <div class="text-3xl font-bold text-white">10 <span class="text-sm font-normal text-slate-400">km</span></div>
                    <div class="text-xs text-slate-400">Clear view</div>
                </div>
                <div class="glass-card rounded-2xl p-4 flex flex-col justify-between h-32">
                    <div class="text-slate-500 text-xs uppercase">Pressure</div>
                    <div class="text-3xl font-bold text-white" id="pressure">1012</div>
                    <div class="text-xs text-slate-400">hPa</div>
                </div>
                <div class="glass-card rounded-2xl p-4 flex flex-col justify-between h-32">
                    <div class="text-slate-500 text-xs uppercase">Precipitation</div>
                    <div class="text-3xl font-bold text-white" id="precip-chance">0%</div>
                    <div class="text-xs text-slate-400">Dry</div>
                </div>
            </div>

        </section>
    </main>

    <footer class="relative z-10 p-6 text-center text-slate-600 text-sm">
        <p>&copy; 2026 KOSH Weather Station. Data simulated for demonstration.</p>
    </footer>

    <script>
        // --- KOSH Area Towns Data ---
        const koshTowns = [
            {
                id: 'klerksdorp',
                name: 'Klerksdorp',
                suburb: 'Jouberton',
                displayName: 'Klerksdorp (Jouberton)',
                tempOffset: 0,
                condition: 'sunny'
            },
            {
                id: 'orkney',
                name: 'Orkney',
                suburb: 'Kanana',
                displayName: 'Orkney (Kanana)',
                tempOffset: 1,
                condition: 'cloudy'
            },
            {
                id: 'stilfontein',
                name: 'Stilfontein',
                suburb: 'Khuma',
                displayName: 'Stilfontein (Khuma)',
                tempOffset: -1,
                condition: 'sunny'
            },
            {
                id: 'hartebeesfontein',
                name: 'Hartebeesfontein',
                suburb: 'Tigane',
                displayName: 'Hartebeesfontein (Tigane)',
                tempOffset: -2,
                condition: 'cloudy'
            }
        ];

        let currentTown = koshTowns[0];

        // --- Configuration & State ---
        const appBody = document.getElementById('app-body');

        // --- STATIC SVG Icons - NO ANIMATIONS ---
        const icons = {
            sunny: `
                <svg viewBox="0 0 64 64" class="w-full h-full">
                    <defs>
                        <radialGradient id="sunGradient" cx="50%" cy="50%" r="50%">
                            <stop offset="0%" style="stop-color:#FCD34D;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#F59E0B;stop-opacity:1" />
                        </radialGradient>
                    </defs>
                    <!-- Static sun - no spin animation -->
                    <circle cx="32" cy="32" r="12" fill="url(#sunGradient)"/>
                    <g stroke="#FCD34D" stroke-width="3" stroke-linecap="round">
                        <line x1="32" y1="4" x2="32" y2="12"/>
                        <line x1="32" y1="52" x2="32" y2="60"/>
                        <line x1="4" y1="32" x2="12" y2="32"/>
                        <line x1="52" y1="32" x2="60" y2="32"/>
                        <line x1="12.2" y1="12.2" x2="17.8" y2="17.8"/>
                        <line x1="46.2" y1="46.2" x2="51.8" y2="51.8"/>
                        <line x1="12.2" y1="51.8" x2="17.8" y2="46.2"/>
                        <line x1="46.2" y1="17.8" x2="51.8" y2="12.2"/>
                    </g>
                </svg>`,
            
            cloudy: `
                <svg viewBox="0 0 64 64" class="w-full h-full">
                    <defs>
                        <linearGradient id="cloudGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#E2E8F0;stop-opacity:0.9" />
                            <stop offset="100%" style="stop-color:#94A3B8;stop-opacity:0.9" />
                        </linearGradient>
                    </defs>
                    <!-- Static cloud - no float animation -->
                    <circle cx="20" cy="24" r="8" fill="#FCD34D" opacity="0.4"/>
                    <path fill="url(#cloudGradient)" d="M46 44a10 10 0 1 0-8-18 14 14 0 1 0-26 6h34z"/>
                </svg>`,
            
            rain: `
                <svg viewBox="0 0 64 64" class="w-full h-full">
                    <defs>
                        <linearGradient id="rainCloudGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#64748B;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#475569;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <path fill="url(#rainCloudGradient)" d="M46 38a10 10 0 1 0-8-18 14 14 0 1 0-26 6h34z"/>
                    <!-- Static rain drops - no animation -->
                    <line x1="20" y1="44" x2="18" y2="52" stroke="#60A5FA" stroke-width="2" stroke-linecap="round"/>
                    <line x1="32" y1="44" x2="30" y2="52" stroke="#60A5FA" stroke-width="2" stroke-linecap="round"/>
                    <line x1="44" y1="44" x2="42" y2="52" stroke="#60A5FA" stroke-width="2" stroke-linecap="round"/>
                </svg>`,
            
            storm: `
                <svg viewBox="0 0 64 64" class="w-full h-full">
                    <defs>
                        <linearGradient id="stormCloudGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#475569;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#1E293B;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <path fill="url(#stormCloudGradient)" d="M46 38a10 10 0 1 0-8-18 14 14 0 1 0-26 6h34z"/>
                    <!-- Static lightning - no flash animation -->
                    <path d="M28 44L24 52H30L26 60L36 48H30L34 44H28Z" fill="#FCD34D"/>
                </svg>`,
            
            night: `
                <svg viewBox="0 0 64 64" class="w-full h-full">
                    <defs>
                        <linearGradient id="moonGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#FEF3C7;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#FDE68A;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <!-- Static moon - no float animation -->
                    <path fill="url(#moonGradient)" d="M36 12a16 16 0 1 1-20 20 12 12 0 0 0 20-20z"/>
                    <circle cx="50" cy="20" r="1" fill="white" opacity="0.8"/>
                    <circle cx="15" cy="45" r="1.5" fill="white" opacity="0.6"/>
                    <circle cx="55" cy="50" r="1" fill="white" opacity="0.7"/>
                </svg>`
        };

        // --- Render Towns Section ---
        function renderTowns() {
            const container = document.getElementById('towns-container');
            container.innerHTML = '';

            koshTowns.forEach(town => {
                const townEl = document.createElement('div');
                townEl.className = `town-card rounded-2xl p-5 snap-center ${town.id === currentTown.id ? 'active' : ''}`;
                townEl.onclick = () => selectTown(town);

                townEl.innerHTML = `
                    <div class="flex items-center justify-between mb-3">
                        <div>
                            <h4 class="font-bold text-white text-xl">${town.name}</h4>
                            <span class="suburb-tag px-3 py-1 rounded-full text-xs mt-1 inline-block">${town.suburb}</span>
                        </div>
                        <!-- Static weather icon -->
                        <div class="w-12 h-12">${icons[town.condition]}</div>
                    </div>
                    <div class="flex justify-between items-center mt-4 pt-3 border-t border-slate-700/50">
                        <span class="text-slate-400 text-sm">Current</span>
                        <span class="text-cyan-400 font-bold text-2xl">${generateTemp(town.tempOffset)}°</span>
                    </div>
                `;

                container.appendChild(townEl);
            });
        }

        function generateTemp(offset) {
            const base = 22 + offset;
            return Math.floor(base + Math.random() * 3);
        }

        function selectTown(town) {
            currentTown = town;
            document.getElementById('current-location-display').textContent = town.displayName;
            document.getElementById('location-name').textContent = town.displayName;
            renderTowns();
            render();
        }

        // --- Data Simulation ---
        function generateWeatherData() {
            const now = new Date();
            const currentHour = now.getHours();
            
            const baseCondition = currentTown.condition;
            
            let tempBase = 22 + currentTown.tempOffset;
            if (currentHour > 20 || currentHour < 6) tempBase -= 3;

            const current = {
                temp: Math.floor(tempBase + Math.random() * 4),
                condition: (currentHour > 20 || currentHour < 6) ? 'night' : baseCondition,
                humidity: Math.floor(45 + Math.random() * 35),
                wind: Math.floor(8 + Math.random() * 18),
                uv: (currentHour > 10 && currentHour < 16 && baseCondition === 'sunny') ? Math.floor(4 + Math.random() * 6) : 0,
                precip: (baseCondition === 'rain' || baseCondition === 'storm') ? Math.floor(50 + Math.random() * 40) : Math.floor(Math.random() * 15),
                pressure: 1010 + Math.floor(Math.random() * 25 - 12)
            };

            const hourly = [];
            for(let i=0; i<24; i++) {
                let h = (currentHour + i) % 24;
                let isNight = h > 20 || h < 6;
                let t = tempBase + Math.sin((h - 6) / 18 * Math.PI) * 5;
                if(isNight) t -= 4;
                
                let icon = isNight ? 'night' : currentTown.condition;
                if (Math.random() > 0.8) icon = 'cloudy';
                
                hourly.push({
                    time: `${h.toString().padStart(2, '0')}:00`,
                    temp: Math.floor(t),
                    icon: icon
                });
            }

            const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            const daily = [];
            for(let i=0; i<7; i++) {
                let d = new Date();
                d.setDate(d.getDate() + i);
                let dayName = i === 0 ? 'Today' : days[d.getDay()];
                let high = Math.floor(20 + currentTown.tempOffset + Math.random() * 10);
                let low = high - Math.floor(6 + Math.random() * 5);
                let conds = ['sunny', 'cloudy', 'rain', 'cloudy', 'sunny'];
                let cond = conds[Math.floor(Math.random() * conds.length)];
                
                daily.push({
                    day: dayName,
                    high: high,
                    low: low,
                    condition: cond
                });
            }

            return { current, hourly, daily };
        }

        // --- Rendering Logic ---
        function updateTheme(condition) {
            appBody.classList.remove('bg-clear-night', 'bg-cloudy-night', 'bg-storm', 'bg-clear-day');
            
            if (condition === 'night') appBody.classList.add('bg-clear-night');
            else if (condition === 'rain') appBody.classList.add('bg-cloudy-night');
            else if (condition === 'storm') appBody.classList.add('bg-storm');
            else if (condition === 'cloudy') appBody.classList.add('bg-cloudy-night');
            else appBody.classList.add('bg-clear-day');
        }

        function render() {
            const data = generateWeatherData();
            
            updateTheme(data.current.condition);

            const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('current-date').textContent = new Date().toLocaleDateString('en-US', dateOptions);

            document.getElementById('current-temp').textContent = `${data.current.temp}°`;
            document.getElementById('weather-desc').textContent = data.current.condition.replace('-', ' ');
            // Static main weather icon
            document.getElementById('weather-icon-container').innerHTML = icons[data.current.condition] || icons.sunny;
            document.getElementById('wind-speed').textContent = data.current.wind;
            document.getElementById('humidity').textContent = data.current.humidity;
            
            document.getElementById('uv-index').textContent = data.current.uv;
            document.getElementById('pressure').textContent = data.current.pressure;
            document.getElementById('precip-chance').textContent = `${data.current.precip}%`;

            const uvEl = document.getElementById('uv-index').nextElementSibling;
            if (data.current.uv <= 2) uvEl.className = 'text-xs text-emerald-400';
            else if (data.current.uv <= 5) uvEl.className = 'text-xs text-yellow-400';
            else if (data.current.uv <= 7) uvEl.className = 'text-xs text-orange-400';
            else uvEl.className = 'text-xs text-red-400';

            const precipEl = document.getElementById('precip-chance').nextElementSibling;
            precipEl.textContent = data.current.precip > 50 ? 'Wet' : data.current.precip > 20 ? 'Possible' : 'Dry';

            const hourlyContainer = document.getElementById('hourly-container');
            hourlyContainer.innerHTML = '';
            data.hourly.forEach(h => {
                const el = document.createElement('div');
                el.className = 'glass-card rounded-2xl p-4 min-w-[85px] flex flex-col items-center justify-between snap-center cursor-pointer';
                el.innerHTML = `
                    <span class="text-xs text-slate-400 font-medium">${h.time}</span>
                    <!-- Static icon -->
                    <div class="w-10 h-10 my-3">${icons[h.icon]}</div>
                    <span class="font-bold text-white text-lg">${h.temp}°</span>
                `;
                hourlyContainer.appendChild(el);
            });

            const dailyContainer = document.getElementById('daily-forecast');
            dailyContainer.innerHTML = '';
            data.daily.forEach((d, index) => {
                const el = document.createElement('div');
                el.className = 'flex items-center justify-between p-4 rounded-xl hover:bg-slate-800/50 transition cursor-default group border border-transparent hover:border-slate-700';
                
                el.innerHTML = `
                    <div class="w-20 font-medium text-slate-300">${d.day}</div>
                    <!-- Static icon -->
                    <div class="w-10 h-10 flex-shrink-0">${icons[d.condition]}</div>
                    <div class="flex-grow mx-6 flex items-center gap-3">
                        <span class="text-sm w-8 text-right text-slate-500">${d.low}°</span>
                        <div class="flex-grow h-2 bg-slate-800 rounded-full relative overflow-hidden">
                            <div class="absolute h-full bg-gradient-to-r from-cyan-500 to-blue-500 rounded-full" 
                                 style="left: ${10 + (d.low/3)}%; width: ${Math.max(15, (d.high-d.low)*2)}%"></div>
                        </div>
                        <span class="text-sm w-8 font-bold text-white">${d.high}°</span>
                    </div>
                `;
                dailyContainer.appendChild(el);
            });

            const sunChart = document.getElementById('sun-chart');
            sunChart.innerHTML = '';
            const currentH = new Date().getHours();
            for(let i=0; i<14; i++) {
                const h = 5 + i;
                const heightPct = Math.max(15, 100 - Math.pow((i - 6.5), 2) * 1.8);
                
                const bar = document.createElement('div');
                bar.className = `w-full rounded-t-sm relative transition-all duration-300 ${currentH === h ? 'bg-cyan-400 shadow-[0_0_15px_rgba(34,211,238,0.6)]' : 'bg-slate-700/50 hover:bg-slate-600/50'}`;
                bar.style.height = `${heightPct}%`;
                bar.title = `${h}:00`;
                
                sunChart.appendChild(bar);
            }
        }

        function scrollHourly(direction) {
            const container = document.getElementById('hourly-container');
            const scrollAmount = 220;
            container.scrollBy({ left: direction === 'left' ? -scrollAmount : scrollAmount, behavior: 'smooth' });
        }

        // --- Init ---
        document.addEventListener('DOMContentLoaded', () => {
            renderTowns();
            render();
            
            setInterval(() => {
                if(new Date().getSeconds() === 0) {
                    const currentTempEl = document.getElementById('current-temp');
                    let current = parseInt(currentTempEl.textContent);
                    currentTempEl.textContent = (current + (Math.random() > 0.5 ? 1 : -1)) + '°';
                }
            }, 1000);
        });
    </script>
</body>
</html>
